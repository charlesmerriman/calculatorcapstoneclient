This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: node_modules, dist, build, .git
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.VSCodeCounter/
  2025-12-24_19-23-10/
    details.md
    diff-details.md
    diff.csv
    diff.md
    diff.txt
    results.csv
    results.json
    results.md
    results.txt
public/
  vite.svg
src/
  components/
    auth/
      Login.tsx
      Register.tsx
    carat-calculator/
      BannerRow.tsx
      CaratCalculator.tsx
      IncomeForm.tsx
      MLBChanceDisplay.tsx
      notes
    navbar/
      Navbar.tsx
  services/
    CalculatorContext.tsx
    CalculatorProvider.tsx
    calculatorTypes.ts
    userServices.tsx
  views/
    ApplicationViews.tsx
    Authorized.tsx
  App.css
  App.tsx
  index.css
  main.tsx
.gitignore
eslint.config.js
index.html
package.json
README.md
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".VSCodeCounter/2025-12-24_19-23-10/details.md">
# Details

Date : 2025-12-24 19:23:10

Directory /home/korrvo/workspace/calculatorcapstoneclient

Total : 27 files,  5484 codes, 13 comments, 140 blanks, all 5637 lines

[Summary](results.md) / Details / [Diff Summary](diff.md) / [Diff Details](diff-details.md)

## Files
| filename | language | code | comment | blank | total |
| :--- | :--- | ---: | ---: | ---: | ---: |
| [README.md](/README.md) | Markdown | 60 | 0 | 14 | 74 |
| [eslint.config.js](/eslint.config.js) | JavaScript | 22 | 0 | 2 | 24 |
| [index.html](/index.html) | HTML | 13 | 0 | 1 | 14 |
| [package-lock.json](/package-lock.json) | JSON | 4,286 | 0 | 1 | 4,287 |
| [package.json](/package.json) | JSON | 37 | 0 | 1 | 38 |
| [public/vite.svg](/public/vite.svg) | XML | 1 | 0 | 0 | 1 |
| [src/App.css](/src/App.css) | PostCSS | 0 | 1 | 1 | 2 |
| [src/App.tsx](/src/App.tsx) | TypeScript JSX | 26 | 0 | 3 | 29 |
| [src/components/auth/Login.tsx](/src/components/auth/Login.tsx) | TypeScript JSX | 60 | 0 | 8 | 68 |
| [src/components/auth/Register.tsx](/src/components/auth/Register.tsx) | TypeScript JSX | 123 | 0 | 14 | 137 |
| [src/components/carat-calculator/BannerRow.tsx](/src/components/carat-calculator/BannerRow.tsx) | TypeScript JSX | 214 | 2 | 11 | 227 |
| [src/components/carat-calculator/CaratCalculator.tsx](/src/components/carat-calculator/CaratCalculator.tsx) | TypeScript JSX | 81 | 0 | 11 | 92 |
| [src/components/carat-calculator/IncomeForm.tsx](/src/components/carat-calculator/IncomeForm.tsx) | TypeScript JSX | 145 | 0 | 5 | 150 |
| [src/components/navbar/Navbar.tsx](/src/components/navbar/Navbar.tsx) | TypeScript JSX | 46 | 3 | 10 | 59 |
| [src/index.css](/src/index.css) | PostCSS | 4 | 0 | 1 | 5 |
| [src/main.tsx](/src/main.tsx) | TypeScript JSX | 12 | 0 | 2 | 14 |
| [src/services/CalculatorContext.tsx](/src/services/CalculatorContext.tsx) | TypeScript JSX | 12 | 0 | 5 | 17 |
| [src/services/CalculatorProvider.tsx](/src/services/CalculatorProvider.tsx) | TypeScript JSX | 97 | 2 | 10 | 109 |
| [src/services/calculatorServices.tsx](/src/services/calculatorServices.tsx) | TypeScript JSX | 0 | 0 | 1 | 1 |
| [src/services/calculatorTypes.ts](/src/services/calculatorTypes.ts) | TypeScript | 75 | 0 | 10 | 85 |
| [src/services/userServices.tsx](/src/services/userServices.tsx) | TypeScript JSX | 77 | 0 | 14 | 91 |
| [src/views/ApplicationViews.tsx](/src/views/ApplicationViews.tsx) | TypeScript JSX | 20 | 0 | 2 | 22 |
| [src/views/Authorized.tsx](/src/views/Authorized.tsx) | TypeScript JSX | 14 | 0 | 4 | 18 |
| [tsconfig.app.json](/tsconfig.app.json) | JSON | 24 | 2 | 3 | 29 |
| [tsconfig.json](/tsconfig.json) | JSON with Comments | 7 | 0 | 1 | 8 |
| [tsconfig.node.json](/tsconfig.node.json) | JSON | 22 | 2 | 3 | 27 |
| [vite.config.ts](/vite.config.ts) | TypeScript | 6 | 1 | 2 | 9 |

[Summary](results.md) / Details / [Diff Summary](diff.md) / [Diff Details](diff-details.md)
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/diff-details.md">
# Diff Details

Date : 2025-12-24 19:23:10

Directory /home/korrvo/workspace/calculatorcapstoneclient

Total : 0 files,  0 codes, 0 comments, 0 blanks, all 0 lines

[Summary](results.md) / [Details](details.md) / [Diff Summary](diff.md) / Diff Details

## Files
| filename | language | code | comment | blank | total |
| :--- | :--- | ---: | ---: | ---: | ---: |

[Summary](results.md) / [Details](details.md) / [Diff Summary](diff.md) / Diff Details
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/diff.csv">
"filename", "language", "", "comment", "blank", "total"
"Total", "-", , 0, 0, 0
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/diff.md">
# Diff Summary

Date : 2025-12-24 19:23:10

Directory /home/korrvo/workspace/calculatorcapstoneclient

Total : 0 files,  0 codes, 0 comments, 0 blanks, all 0 lines

[Summary](results.md) / [Details](details.md) / Diff Summary / [Diff Details](diff-details.md)

## Languages
| language | files | code | comment | blank | total |
| :--- | ---: | ---: | ---: | ---: | ---: |

## Directories
| path | files | code | comment | blank | total |
| :--- | ---: | ---: | ---: | ---: | ---: |

[Summary](results.md) / [Details](details.md) / Diff Summary / [Diff Details](diff-details.md)
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/diff.txt">
Date : 2025-12-24 19:23:10
Directory : /home/korrvo/workspace/calculatorcapstoneclient
Total : 0 files,  0 codes, 0 comments, 0 blanks, all 0 lines

Languages
+----------+------------+------------+------------+------------+------------+
| language | files      | code       | comment    | blank      | total      |
+----------+------------+------------+------------+------------+------------+
+----------+------------+------------+------------+------------+------------+

Directories
+------+------------+------------+------------+------------+------------+
| path | files      | code       | comment    | blank      | total      |
+------+------------+------------+------------+------------+------------+
+------+------------+------------+------------+------------+------------+

Files
+----------+----------+------------+------------+------------+------------+
| filename | language | code       | comment    | blank      | total      |
+----------+----------+------------+------------+------------+------------+
| Total    |          |          0 |          0 |          0 |          0 |
+----------+----------+------------+------------+------------+------------+
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/results.csv">
"filename", "language", "Markdown", "JSON with Comments", "JSON", "HTML", "TypeScript", "JavaScript", "XML", "PostCSS", "TypeScript JSX", "comment", "blank", "total"
"/home/korrvo/workspace/calculatorcapstoneclient/README.md", "Markdown", 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 74
"/home/korrvo/workspace/calculatorcapstoneclient/eslint.config.js", "JavaScript", 0, 0, 0, 0, 0, 22, 0, 0, 0, 0, 2, 24
"/home/korrvo/workspace/calculatorcapstoneclient/index.html", "HTML", 0, 0, 0, 13, 0, 0, 0, 0, 0, 0, 1, 14
"/home/korrvo/workspace/calculatorcapstoneclient/package-lock.json", "JSON", 0, 0, 4286, 0, 0, 0, 0, 0, 0, 0, 1, 4287
"/home/korrvo/workspace/calculatorcapstoneclient/package.json", "JSON", 0, 0, 37, 0, 0, 0, 0, 0, 0, 0, 1, 38
"/home/korrvo/workspace/calculatorcapstoneclient/public/vite.svg", "XML", 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1
"/home/korrvo/workspace/calculatorcapstoneclient/src/App.css", "PostCSS", 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2
"/home/korrvo/workspace/calculatorcapstoneclient/src/App.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 26, 0, 3, 29
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Login.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 60, 0, 8, 68
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Register.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 123, 0, 14, 137
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/BannerRow.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 214, 2, 11, 227
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/CaratCalculator.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 81, 0, 11, 92
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/IncomeForm.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 145, 0, 5, 150
"/home/korrvo/workspace/calculatorcapstoneclient/src/components/navbar/Navbar.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 46, 3, 10, 59
"/home/korrvo/workspace/calculatorcapstoneclient/src/index.css", "PostCSS", 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 1, 5
"/home/korrvo/workspace/calculatorcapstoneclient/src/main.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 2, 14
"/home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorContext.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 5, 17
"/home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorProvider.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 97, 2, 10, 109
"/home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorServices.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1
"/home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorTypes.ts", "TypeScript", 0, 0, 0, 0, 75, 0, 0, 0, 0, 0, 10, 85
"/home/korrvo/workspace/calculatorcapstoneclient/src/services/userServices.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 77, 0, 14, 91
"/home/korrvo/workspace/calculatorcapstoneclient/src/views/ApplicationViews.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 2, 22
"/home/korrvo/workspace/calculatorcapstoneclient/src/views/Authorized.tsx", "TypeScript JSX", 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 4, 18
"/home/korrvo/workspace/calculatorcapstoneclient/tsconfig.app.json", "JSON", 0, 0, 24, 0, 0, 0, 0, 0, 0, 2, 3, 29
"/home/korrvo/workspace/calculatorcapstoneclient/tsconfig.json", "JSON with Comments", 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 1, 8
"/home/korrvo/workspace/calculatorcapstoneclient/tsconfig.node.json", "JSON", 0, 0, 22, 0, 0, 0, 0, 0, 0, 2, 3, 27
"/home/korrvo/workspace/calculatorcapstoneclient/vite.config.ts", "TypeScript", 0, 0, 0, 0, 6, 0, 0, 0, 0, 1, 2, 9
"Total", "-", 60, 7, 4369, 13, 81, 22, 1, 4, 927, 13, 140, 5637
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/results.json">
{"file:///home/korrvo/workspace/calculatorcapstoneclient/README.md":{"language":"Markdown","code":60,"comment":0,"blank":14},"file:///home/korrvo/workspace/calculatorcapstoneclient/tsconfig.json":{"language":"JSON with Comments","code":7,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/package.json":{"language":"JSON","code":37,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/index.html":{"language":"HTML","code":13,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/tsconfig.app.json":{"language":"JSON","code":24,"comment":2,"blank":3},"file:///home/korrvo/workspace/calculatorcapstoneclient/vite.config.ts":{"language":"TypeScript","code":6,"comment":1,"blank":2},"file:///home/korrvo/workspace/calculatorcapstoneclient/eslint.config.js":{"language":"JavaScript","code":22,"comment":0,"blank":2},"file:///home/korrvo/workspace/calculatorcapstoneclient/package-lock.json":{"language":"JSON","code":4286,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/tsconfig.node.json":{"language":"JSON","code":22,"comment":2,"blank":3},"file:///home/korrvo/workspace/calculatorcapstoneclient/public/vite.svg":{"language":"XML","code":1,"comment":0,"blank":0},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/App.css":{"language":"PostCSS","code":0,"comment":1,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/views/ApplicationViews.tsx":{"language":"TypeScript JSX","code":20,"comment":0,"blank":2},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorServices.tsx":{"language":"TypeScript JSX","code":0,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/index.css":{"language":"PostCSS","code":4,"comment":0,"blank":1},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorProvider.tsx":{"language":"TypeScript JSX","code":97,"comment":2,"blank":10},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/main.tsx":{"language":"TypeScript JSX","code":12,"comment":0,"blank":2},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/views/Authorized.tsx":{"language":"TypeScript JSX","code":14,"comment":0,"blank":4},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/navbar/Navbar.tsx":{"language":"TypeScript JSX","code":46,"comment":3,"blank":10},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/BannerRow.tsx":{"language":"TypeScript JSX","code":214,"comment":2,"blank":11},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/IncomeForm.tsx":{"language":"TypeScript JSX","code":145,"comment":0,"blank":5},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/CaratCalculator.tsx":{"language":"TypeScript JSX","code":81,"comment":0,"blank":11},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorContext.tsx":{"language":"TypeScript JSX","code":12,"comment":0,"blank":5},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/services/userServices.tsx":{"language":"TypeScript JSX","code":77,"comment":0,"blank":14},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Login.tsx":{"language":"TypeScript JSX","code":60,"comment":0,"blank":8},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorTypes.ts":{"language":"TypeScript","code":75,"comment":0,"blank":10},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Register.tsx":{"language":"TypeScript JSX","code":123,"comment":0,"blank":14},"file:///home/korrvo/workspace/calculatorcapstoneclient/src/App.tsx":{"language":"TypeScript JSX","code":26,"comment":0,"blank":3}}
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/results.md">
# Summary

Date : 2025-12-24 19:23:10

Directory /home/korrvo/workspace/calculatorcapstoneclient

Total : 27 files,  5484 codes, 13 comments, 140 blanks, all 5637 lines

Summary / [Details](details.md) / [Diff Summary](diff.md) / [Diff Details](diff-details.md)

## Languages
| language | files | code | comment | blank | total |
| :--- | ---: | ---: | ---: | ---: | ---: |
| JSON | 4 | 4,369 | 4 | 8 | 4,381 |
| TypeScript JSX | 14 | 927 | 7 | 100 | 1,034 |
| TypeScript | 2 | 81 | 1 | 12 | 94 |
| Markdown | 1 | 60 | 0 | 14 | 74 |
| JavaScript | 1 | 22 | 0 | 2 | 24 |
| HTML | 1 | 13 | 0 | 1 | 14 |
| JSON with Comments | 1 | 7 | 0 | 1 | 8 |
| PostCSS | 2 | 4 | 1 | 2 | 7 |
| XML | 1 | 1 | 0 | 0 | 1 |

## Directories
| path | files | code | comment | blank | total |
| :--- | ---: | ---: | ---: | ---: | ---: |
| . | 27 | 5,484 | 13 | 140 | 5,637 |
| . (Files) | 9 | 4,477 | 5 | 28 | 4,510 |
| public | 1 | 1 | 0 | 0 | 1 |
| src | 17 | 1,006 | 8 | 112 | 1,126 |
| src (Files) | 4 | 42 | 1 | 7 | 50 |
| src/components | 6 | 669 | 5 | 59 | 733 |
| src/components/auth | 2 | 183 | 0 | 22 | 205 |
| src/components/carat-calculator | 3 | 440 | 2 | 27 | 469 |
| src/components/navbar | 1 | 46 | 3 | 10 | 59 |
| src/services | 5 | 261 | 2 | 40 | 303 |
| src/views | 2 | 34 | 0 | 6 | 40 |

Summary / [Details](details.md) / [Diff Summary](diff.md) / [Diff Details](diff-details.md)
</file>

<file path=".VSCodeCounter/2025-12-24_19-23-10/results.txt">
Date : 2025-12-24 19:23:10
Directory : /home/korrvo/workspace/calculatorcapstoneclient
Total : 27 files,  5484 codes, 13 comments, 140 blanks, all 5637 lines

Languages
+--------------------+------------+------------+------------+------------+------------+
| language           | files      | code       | comment    | blank      | total      |
+--------------------+------------+------------+------------+------------+------------+
| JSON               |          4 |      4,369 |          4 |          8 |      4,381 |
| TypeScript JSX     |         14 |        927 |          7 |        100 |      1,034 |
| TypeScript         |          2 |         81 |          1 |         12 |         94 |
| Markdown           |          1 |         60 |          0 |         14 |         74 |
| JavaScript         |          1 |         22 |          0 |          2 |         24 |
| HTML               |          1 |         13 |          0 |          1 |         14 |
| JSON with Comments |          1 |          7 |          0 |          1 |          8 |
| PostCSS            |          2 |          4 |          1 |          2 |          7 |
| XML                |          1 |          1 |          0 |          0 |          1 |
+--------------------+------------+------------+------------+------------+------------+

Directories
+-----------------------------------------------------------------------------------------------------+------------+------------+------------+------------+------------+
| path                                                                                                | files      | code       | comment    | blank      | total      |
+-----------------------------------------------------------------------------------------------------+------------+------------+------------+------------+------------+
| .                                                                                                   |         27 |      5,484 |         13 |        140 |      5,637 |
| . (Files)                                                                                           |          9 |      4,477 |          5 |         28 |      4,510 |
| public                                                                                              |          1 |          1 |          0 |          0 |          1 |
| src                                                                                                 |         17 |      1,006 |          8 |        112 |      1,126 |
| src (Files)                                                                                         |          4 |         42 |          1 |          7 |         50 |
| src/components                                                                                      |          6 |        669 |          5 |         59 |        733 |
| src/components/auth                                                                                 |          2 |        183 |          0 |         22 |        205 |
| src/components/carat-calculator                                                                     |          3 |        440 |          2 |         27 |        469 |
| src/components/navbar                                                                               |          1 |         46 |          3 |         10 |         59 |
| src/services                                                                                        |          5 |        261 |          2 |         40 |        303 |
| src/views                                                                                           |          2 |         34 |          0 |          6 |         40 |
+-----------------------------------------------------------------------------------------------------+------------+------------+------------+------------+------------+

Files
+-----------------------------------------------------------------------------------------------------+--------------------+------------+------------+------------+------------+
| filename                                                                                            | language           | code       | comment    | blank      | total      |
+-----------------------------------------------------------------------------------------------------+--------------------+------------+------------+------------+------------+
| /home/korrvo/workspace/calculatorcapstoneclient/README.md                                           | Markdown           |         60 |          0 |         14 |         74 |
| /home/korrvo/workspace/calculatorcapstoneclient/eslint.config.js                                    | JavaScript         |         22 |          0 |          2 |         24 |
| /home/korrvo/workspace/calculatorcapstoneclient/index.html                                          | HTML               |         13 |          0 |          1 |         14 |
| /home/korrvo/workspace/calculatorcapstoneclient/package-lock.json                                   | JSON               |      4,286 |          0 |          1 |      4,287 |
| /home/korrvo/workspace/calculatorcapstoneclient/package.json                                        | JSON               |         37 |          0 |          1 |         38 |
| /home/korrvo/workspace/calculatorcapstoneclient/public/vite.svg                                     | XML                |          1 |          0 |          0 |          1 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/App.css                                         | PostCSS            |          0 |          1 |          1 |          2 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/App.tsx                                         | TypeScript JSX     |         26 |          0 |          3 |         29 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Login.tsx                       | TypeScript JSX     |         60 |          0 |          8 |         68 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/auth/Register.tsx                    | TypeScript JSX     |        123 |          0 |         14 |        137 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/BannerRow.tsx       | TypeScript JSX     |        214 |          2 |         11 |        227 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/CaratCalculator.tsx | TypeScript JSX     |         81 |          0 |         11 |         92 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/carat-calculator/IncomeForm.tsx      | TypeScript JSX     |        145 |          0 |          5 |        150 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/components/navbar/Navbar.tsx                    | TypeScript JSX     |         46 |          3 |         10 |         59 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/index.css                                       | PostCSS            |          4 |          0 |          1 |          5 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/main.tsx                                        | TypeScript JSX     |         12 |          0 |          2 |         14 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorContext.tsx                  | TypeScript JSX     |         12 |          0 |          5 |         17 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/services/CalculatorProvider.tsx                 | TypeScript JSX     |         97 |          2 |         10 |        109 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorServices.tsx                 | TypeScript JSX     |          0 |          0 |          1 |          1 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/services/calculatorTypes.ts                     | TypeScript         |         75 |          0 |         10 |         85 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/services/userServices.tsx                       | TypeScript JSX     |         77 |          0 |         14 |         91 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/views/ApplicationViews.tsx                      | TypeScript JSX     |         20 |          0 |          2 |         22 |
| /home/korrvo/workspace/calculatorcapstoneclient/src/views/Authorized.tsx                            | TypeScript JSX     |         14 |          0 |          4 |         18 |
| /home/korrvo/workspace/calculatorcapstoneclient/tsconfig.app.json                                   | JSON               |         24 |          2 |          3 |         29 |
| /home/korrvo/workspace/calculatorcapstoneclient/tsconfig.json                                       | JSON with Comments |          7 |          0 |          1 |          8 |
| /home/korrvo/workspace/calculatorcapstoneclient/tsconfig.node.json                                  | JSON               |         22 |          2 |          3 |         27 |
| /home/korrvo/workspace/calculatorcapstoneclient/vite.config.ts                                      | TypeScript         |          6 |          1 |          2 |          9 |
| Total                                                                                               |                    |      5,484 |         13 |        140 |      5,637 |
+-----------------------------------------------------------------------------------------------------+--------------------+------------+------------+------------+------------+
</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="src/components/carat-calculator/notes">
I need:

How many carats the user will earn between now and the banner end date (and how many pulls)
    Daily carat pack: Just count the number of days between current date and end date
    Club Rank: How many times does the 1st of the month occur between current date and end date
    Team Trials: How many mondays fall between current date and end date
    Champion's Meeting: (Dished out whenevre a champion's meeting finals occurs)

    Need:
        Total income by banner end date (above, plus paid carats, plus related support ticket pulls, plus starting carats)
        Max pulls (Total income / 150)



May require a timeline for champion's meeting income to work
</file>

<file path="src/views/Authorized.tsx">
import type { ReactNode } from "react"
import { Navigate, useLocation } from "react-router-dom"

interface AuthorizedProps {
    children: ReactNode
}

export const Authorized = ({ children }: AuthorizedProps) => {
	const location = useLocation()

	if (localStorage.getItem("authToken")) {
		return children
	}

	else {
		return <Navigate to={`/login`} state={{ from: location }} replace />
	}
}
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="src/views/ApplicationViews.tsx">
import { Outlet, Route, Routes } from "react-router-dom"
import { Navbar } from "../components/navbar/Navbar.tsx"
import { CaratCalculator } from "../components/carat-calculator/CaratCalculator"

export const ApplicationViews = () => {
	return (
		<Routes>
			<Route
				path="/"
				element={
					<>
						<Navbar />
						<Outlet />
					</>
				}
			>
				<Route index element={<CaratCalculator />} />
			</Route>
		</Routes>
	)
}
</file>

<file path="src/App.css">
/* For anything not related to tailwind */
</file>

<file path="src/main.tsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'
import { BrowserRouter } from 'react-router-dom'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </StrictMode>,
)
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calculatorcapstoneclient</title>
  </head>
  <body class="bg-neutral-200">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react(), tailwindcss()],
})
</file>

<file path="src/services/CalculatorContext.tsx">
import { createContext, useContext } from "react"
import type { CalculatorContextType } from "./calculatorTypes"

export const CalculatorContext = createContext<
	CalculatorContextType | undefined
>(undefined)

export const useCalculatorData = () => {
	const context = useContext(CalculatorContext)

	if (context === undefined) {
		throw new Error("calculatorData must be used within a Provider")
	}

	return context
}
</file>

<file path="src/services/userServices.tsx">
interface LoginCredentials {
	username: string
	password: string
}

interface LoginResponse {
	token?: string
	user?: {
		id: number
		username: string
		email: string
	}
	error?: string
}

interface RegisterCredentials {
	username: string
	password: string
	email: string
	first_name: string
	last_name: string
}

interface RegisterResponse {
	token?: string
	user?: {
		id: number
		username: string
		email: string
	}
	error?: string
}

export const userLogin = async (
	credentials: LoginCredentials
): Promise<LoginResponse> => {
	try {
		const response = await fetch("http://localhost:8000/login", {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify(credentials)
		})

		const data = await response.json()

		if (!response.ok) {
			throw new Error(data.error || "Login failed")
		}

		if (data.token) {
			localStorage.setItem("authToken", data.token)
		}

		return data
	} catch (error) {
		console.error("Login error:", error)
		throw error
	}
}

export const userRegister = async (
	credentials: RegisterCredentials
): Promise<RegisterResponse> => {
	try {
		const response = await fetch("http://localhost:8000/register", {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify(credentials)
		})

		const data = await response.json()

		if (!response.ok) {
			throw new Error(data.error || "Registration failed")
		}

		if (data.token) {
			localStorage.setItem("authToken", data.token)
		}

		return data
	} catch (error) {
		console.error("Registration error:", error)
		throw error
	}
}
</file>

<file path="src/components/auth/Login.tsx">
import { useForm } from "react-hook-form"
import { userLogin } from "../../services/userServices"
import { Link, useNavigate } from "react-router-dom"
import type React from "react"

interface LoginFormData {
	username: string
	password: string
}

export const Login: React.FC = () => {
	const {
		register,
		handleSubmit,
		setError,
		formState: { errors, isSubmitting }
	} = useForm<LoginFormData>()
	const navigate = useNavigate()

	const handleLoginSubmit = async (data: LoginFormData) => {
		try {
			const response = await userLogin(data)
			console.log("Login successful:", response)
			navigate("/")
		} catch {
			setError("root", { message: "Invalid username or password" })
		}
	}

	return (
		<div className="min-h-screen flex flex-wrap justify-center items-center bg-gray-700 p-4 rounded-lg max-w-150 mx-auto">
			<form
				onSubmit={handleSubmit(handleLoginSubmit)}
				className="shadow rounded-lg p-6 md:p-8 w-full max-w-md items-center justify-center bg-gray-500"
			>
				<h2 className="text-2xl font-semibold mb-6 w-full text-center">
					Login
				</h2>
				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="username"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Username:
					</label>
					<input
						type="text"
						id="username"
						{...register("username", { required: "Username is required" })}
						autoComplete="username"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
				</div>
				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="password"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Password:
					</label>
					<input
						type="password"
						id="password"
						{...register("password", { required: "Password is required" })}
						autoComplete="current-password"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
				</div>
				{errors.root && (
					<div className="text-red-500">{errors.root.message}</div>
				)}
				<button type="submit" disabled={isSubmitting} className="btn w-full">
					{isSubmitting ? "Loading..." : "Login"}
				</button>{" "}
				<section className="register-link text-center m-4">
					<Link to="/register">Not a member yet?</Link>
				</section>
			</form>
		</div>
	)
}
</file>

<file path="src/components/auth/Register.tsx">
import { useForm } from "react-hook-form"
import { userRegister } from "../../services/userServices"
import { useNavigate } from "react-router-dom"
import type React from "react"

interface RegisterFormData {
	email: string
	username: string
	first_name: string
	last_name: string
	password: string
	confirmPassword: string
}

export const Register: React.FC = () => {
	const {
		register,
		handleSubmit,
		watch,
		setError,
		formState: { errors, isSubmitting }
	} = useForm<RegisterFormData>()
	const navigate = useNavigate()

	const password = watch("password")

	const handleRegisterSubmit = async (data: RegisterFormData) => {
		try {
			const { confirmPassword, ...registerData } = data

			const response = await userRegister(registerData)
			console.log("Registration successful:", response)
			navigate("/")
		} catch {
			setError("root", { message: "Registration failed. Please try again." })
		}
	}

	return (
		<div className="min-h-screen flex flex-wrap justify-center items-center bg-gray-700 p-4 rounded-lg max-w-150 mx-auto">
			<form
				onSubmit={handleSubmit(handleRegisterSubmit)}
				className="shadow rounded-lg p-6 md:p-8 w-full max-w-md items-center justify-center bg-gray-500"
			>
				<h2 className="text-2xl font-semibold mb-6 w-full text-center">
					Register
				</h2>
				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="username"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Username:
					</label>
					<input
						type="text"
						id="username"
						{...register("username", { required: "Username is required" })}
						autoComplete="username"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.username && (
						<span className="text-red-500">{errors.username.message}</span>
					)}
				</div>

				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="email"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Email:
					</label>
					<input
						type="text"
						id="email"
						{...register("email", { required: "Email is required" })}
						autoComplete="email"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.email && (
						<span className="text-red-500">{errors.email.message}</span>
					)}
				</div>

				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="first_name"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						First Name:
					</label>
					<input
						type="text"
						id="first_name"
						{...register("first_name", { required: "First name is required" })}
						autoComplete="given-name"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.first_name && (
						<span className="text-red-500">{errors.first_name.message}</span>
					)}
				</div>

				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="last_name"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Last Name:
					</label>
					<input
						type="text"
						id="last_name"
						{...register("last_name", { required: "Last name is required" })}
						autoComplete="last_name"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.last_name && (
						<span className="text-red-500">{errors.last_name.message}</span>
					)}
				</div>

				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="password"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Password:
					</label>
					<input
						type="password"
						id="password"
						{...register("password", { required: "Password is required" })}
						autoComplete="new-password"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.password && (
						<span className="text-red-500">{errors.password.message}</span>
					)}
				</div>

				<div className="mb-4 flex justify-center items-center">
					<label
						htmlFor="confirmPassword"
						className="block text-sm font-medium mb-1 mr-1 w-25"
					>
						Confirm Password:
					</label>
					<input
						type="password"
						id="confirmPassword"
						{...register("confirmPassword", {
							required: "Please confirm your password",
							validate: (value) =>
								value === password || "Passwords do not match"
						})}
						autoComplete="new-password"
						className="w-full border border-gray-300 rounded-md px-3 py-2"
					/>
					{errors.confirmPassword && (
						<span className="text-red-500">
							{errors.confirmPassword.message}
						</span>
					)}
				</div>

				{errors.root && (
					<div className="text-red-500">{errors.root.message}</div>
				)}

				<button type="submit" disabled={isSubmitting} className="btn w-full">
					{isSubmitting ? "Registering..." : "Register"}
				</button>
			</form>
		</div>
	)
}
</file>

<file path="src/components/carat-calculator/MLBChanceDisplay.tsx">
export const MLBChanceDisplay = ({ pulls, plannedBanner }) => {
	const calculateSuccessProbability = (successNeeded) => {
		const getExactProbability = (k) => {
			// Combinations formula
			let combos = 1
			for (let i = 0; i < k; i++) {
				combos *= (pulls - i) / (i + 1)
			}
			return (
				combos *
				Math.pow(successRateDecimal, k) *
				Math.pow(singleAttemptFailureRate, pulls - k)
			)
		}

		if (pulls >= 1000) {
			return 100
		} else if (pulls >= 800) {
			successNeeded = successNeeded - 4
		} else if (pulls >= 600) {
			successNeeded = successNeeded - 3
		} else if (pulls >= 400) {
			successNeeded = successNeeded - 2
		} else if (pulls >= 200) {
			successNeeded = successNeeded - 1
		}

		const singleAttemptSuccessRate = 0.75
		const successRateDecimal = singleAttemptSuccessRate / 100
		const singleAttemptFailureRate = 1 - successRateDecimal

		const probabilityOfZeroSuccesses = Math.pow(singleAttemptFailureRate, pulls)
		const probabilityOfOneSuccess = 1 - getExactProbability(0)
		const probabilityOfTwoSuccesses =
			1 - getExactProbability(0) - getExactProbability(1)
		const probabilityOfThreeSuccesses =
			1 -
			getExactProbability(0) -
			getExactProbability(1) -
			getExactProbability(2)
		const probabilityOfFourSuccesses =
			1 -
			getExactProbability(0) -
			getExactProbability(1) -
			getExactProbability(2) -
			getExactProbability(3)
		const probabilityOfFiveSuccesses =
			1 -
			getExactProbability(0) -
			getExactProbability(1) -
			getExactProbability(2) -
			getExactProbability(3) -
			getExactProbability(4)

		if (successNeeded === 5) {
			return probabilityOfFiveSuccesses * 100
		} else if (successNeeded === 4) {
			return probabilityOfFourSuccesses * 100
		} else if (successNeeded === 3) {
			return probabilityOfThreeSuccesses * 100
		} else if (successNeeded === 2) {
			return probabilityOfTwoSuccesses * 100
		} else if (successNeeded === 1) {
			return probabilityOfOneSuccess * 100
		} else {
			return 100
		}
	}

	return (
		<div className="border rounded-2xl h-full grid grid-cols-1 bg-white border-gray-200 mx-4">
			<div className="border-r border-b border-gray-200 grid grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-1 text-right">
					Zero:
				</div>{" "}
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(1) - 100).toFixed(2)}%
				</div>
			</div>
			<div className="border-b border-r border-gray-200 grid grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-4 text-right">
					{plannedBanner.banner_support ? "LB 0:" : "1x:"}
				</div>{" "}
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(1).toFixed(2))}%
				</div>
			</div>
			<div className="border-r border-b border-gray-200 grid grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-1 text-right">
					{plannedBanner.banner_support ? "LB 0:" : "2x:"}
				</div>
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(2).toFixed(2))}%
				</div>
			</div>
			<div className="border-r border-b border-gray-200 grid grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-1 text-right">
					{plannedBanner.banner_support ? "LB 0:" : "3x:"}
				</div>{" "}
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(3).toFixed(2))}%
				</div>
			</div>
			<div className="border-r border-b border-gray-200 grid grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-1 text-right">
					{plannedBanner.banner_support ? "LB 0:" : "4x:"}
				</div>{" "}
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(4).toFixed(2))}%
				</div>
			</div>
			<div className="border-r rounded grid border-gray-200 grid-cols-2 items-center">
				<div className="text-lg font-medium text-gray-700 pr-1 text-right">
					{plannedBanner.banner_support ? "LB 0:" : "5x:"}
				</div>{" "}
				<div className="text-base font-medium">
					{Math.abs(calculateSuccessProbability(5).toFixed(2))}%
				</div>
			</div>
		</div>
	)
}
</file>

<file path="src/App.tsx">
import "./App.css"
import { Route, Routes } from "react-router-dom"
import { ApplicationViews } from "./views/ApplicationViews.js"
import { Login } from "./components/auth/Login.js"
import { Register } from "./components/auth/Register.js"
import { Authorized } from "./views/Authorized.js"
import { CalculatorProvider } from "./services/CalculatorProvider.js"

function App() {
	return (
		<Routes>
			<Route path="/login" element={<Login />} />
			<Route path="/register" element={<Register />} />
			<Route
				path="*"
				element={
					<Authorized>
						<CalculatorProvider>
							<ApplicationViews />
						</CalculatorProvider>
					</Authorized>
				}
			/>
		</Routes>
	)
}

export default App
</file>

<file path="src/index.css">
@import "tailwindcss";
@plugin "daisyui" {
	themes: false;
}
</file>

<file path="package.json">
{
  "name": "calculatorcapstoneclient",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@tailwindcss/vite": "^4.1.18",
    "date-fns": "^4.1.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-hook-form": "^7.68.0",
    "react-router-dom": "^7.11.0",
    "react-select": "^5.10.2",
    "tailwindcss": "^4.1.18"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "daisyui": "^5.5.14",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}
</file>

<file path="src/components/navbar/Navbar.tsx">
import { Link, useNavigate } from "react-router-dom"

interface LogoutResponse {
	message: string
}

const userLogout = async (): Promise<LogoutResponse> => {
	const token = localStorage.getItem("authToken")

	try {
		const response = await fetch("http://localhost:8000/logout", {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
				Authorization: `Token ${token}`
			}
		})

		const data = await response.json()

		if (!response.ok) {
			throw new Error(data.error || "Logout failed")
		}
		return data
	} catch (error) {
		console.error("Logout error:", error)
		throw error
	}
}

export const Navbar = () => {
	const navigate = useNavigate()

	const handleLogout = async () => {
		try {
			await userLogout()
			localStorage.removeItem("authToken")
			navigate("/login")
		} catch {
			console.error("Logout failed")
		}
	}

	return (
		<>
<div>{/*Header Section*/}</div><nav className="flex justify-evenly sticky top-0 z-50 bg-[#7aa6a5]">
			{/*Left*/}
			{/*Loading Image Placeholder*/}
			{/*Middle*/}
			<div className="btn btn-ghost p-7">
				<Link to="/" className="text-base">
					Calculator
				</Link>
			</div>
			<div className="btn btn-ghost p-7">
				<Link to="/timeline" className="text-base">
					Timeline
				</Link>
			</div>
			{/*Right side*/}
			<div className="btn btn-ghost p-7 text-base">
				<button onClick={handleLogout}>Logout</button></div>

		</nav><div>{/*Income Drop Down*/}</div></>
	)
}
</file>

<file path="src/services/calculatorTypes.ts">
import type React from "react"

export type BannerTimeline = {
	id: number
	name: string
	start_date: string
	end_date: string
	image: string
}

export type UserStats = {
	current_carat: number
	uma_ticket: number
	support_ticket: number
	daily_carat: boolean
	club_rank: number
	team_trials_rank: number
	champions_meeting_rank: number
}

export type ClubRank = {
	id: number
	name: string
	income_amount: number
}

export type TeamTrailsRank = {
	id: number
	name: string
	income_amount: number
}

export type ChampionsMeetingRank = {
	id: number
	name: string
	income_amount: number
}

export type UserPlannedBanner = | {
	id: number
	tempId?: never
	user: number
	name: string
	number_of_pulls: number
	banner_support: BannerSupport
	banner_uma?: never
} | {
	id?: never
	tempId: number
	user?: never
	name: string
	number_of_pulls: number
	banner_support?: BannerSupport | null
	banner_uma?: never 
} | {
	id?: never
	tempId: number
	user?: never
	name: string
	number_of_pulls: number
	banner_support?: never
	banner_uma?: BannerUma | null
} | {
	id: number
	tempId?: never
	user: number
	name: string
	number_of_pulls: number
	banner_support?: never
	banner_uma: BannerUma
}

export type BannerSupport = {
	id: number,
	banner_timeline: BannerTimeline,
	name: string,
	admin_comments: string
	support_cards: SupportCard[]
	free_pulls: number
}

export type BannerUma = {
	id: number,
	banner_timeline: BannerTimeline,
	name: string,
	admin_comments: string
	umas: Uma[]
	free_pulls: number
}

export type SupportCard = {
	id: number,
	name: string,
	image: string,
	admin_comments: string
}

export type Uma = {
	id: number,
	name: string,
	image: string,
	admin_comments: string
}

export type ChampionsMeeting = {
	id: number,
	name: string,
	cm_number: number,
	start_date: string,
	end_date: string,
	image: string,
	track: string,
	surface_type: string,
	distance: string,
	length: string,
	track_condition: string,
	season: string,
	weather: string,
	direction: string,
	speed_recommendation: string,
	stamina_recommendation: string,
	power_recommendation: string,
	guts_recommendation: string,
	wit_recommendation: string
}

export type EventRewards = {
	id: number,
	name: string,
	carat_amount: number,
	support_ticket_amount: number,
	uma_ticket_amount: number,
	date: string
}

export type CalculatorData = {
	user_stats_data: UserStats
	club_rank_data: ClubRank[]
	team_trials_rank_data: TeamTrailsRank[]
	champions_meeting_rank_data: ChampionsMeetingRank[]
	banner_uma_data: BannerUma[]
	banner_support_data: BannerSupport[]
	user_planned_banner_data: UserPlannedBanner[] | []
	event_rewards_data: EventRewards[]
	champions_meeting_data: ChampionsMeeting[]
}

export type CalculatorContextType = {
	userStatsData: UserStats | null
	clubRankData: ClubRank[] | []
	teamTrialsRankData: TeamTrailsRank[] | []
	championsMeetingRankData: ChampionsMeetingRank[] | []
	umaBannerData: BannerUma[] | []
	supportBannerData: BannerSupport[] | []
	eventRewardsData: EventRewards[] | []
	championsMeetingData: ChampionsMeeting[] | []
	userPlannedBannerData: UserPlannedBanner[] | []
	setUserPlannedBannerData: React.Dispatch<React.SetStateAction<UserPlannedBanner[]>>
	setUserStatsData: React.Dispatch<React.SetStateAction<UserStats | null>>
}
</file>

<file path="src/services/CalculatorProvider.tsx">
import React, { useEffect, useState } from "react"
import { CalculatorContext } from "./CalculatorContext"
import type {
	CalculatorData,
	UserStats,
	ClubRank,
	TeamTrailsRank,
	ChampionsMeetingRank,
	UserPlannedBanner,
	BannerUma,
	BannerSupport,
	EventRewards,
	ChampionsMeeting
} from "./calculatorTypes"

type CalculatorProviderProps = {
	children: React.ReactNode
}

export const CalculatorProvider = ({ children }: CalculatorProviderProps) => {
	const [userStatsData, setUserStatsData] = useState<UserStats | null>(null)
	const [clubRankData, setClubRankData] = useState<ClubRank[] | []>([])
	const [teamTrialsRankData, setTeamTrialsRankData] = useState<
		TeamTrailsRank[] | []
	>([])
	const [championsMeetingRankData, setChampionsMeetingRankData] = useState<
		ChampionsMeetingRank[] | []
	>([])
	const [umaBannerData, setUmaBannerData] = useState<BannerUma[] | []>([])
	const [supportBannerData, setSupportBannerData] = useState<
		BannerSupport[] | []
	>([])
	const [userPlannedBannerData, setUserPlannedBannerData] = useState<
		UserPlannedBanner[] | []
	>([])
	const [eventRewardsData, setEventRewardsData] = useState<EventRewards[] | []>([])
	const [championsMeetingData, setChampionsMeetingData] = useState<ChampionsMeeting[] | []>([])

	useEffect(() => {
		fetch("http://localhost:8000/calculator-data", {
			method: "GET",
			headers: {
				"Content-Type": "application/json",
				Authorization: `Token ${localStorage.getItem("authToken")}`
			}
		})
			.then((response) => response.json())
			.then((data: CalculatorData) => {
				setUserStatsData(data.user_stats_data)
				setClubRankData(data.club_rank_data)
				setTeamTrialsRankData(data.team_trials_rank_data)
				setChampionsMeetingRankData(data.champions_meeting_rank_data)
				setUmaBannerData(data.banner_uma_data)
				setSupportBannerData(data.banner_support_data)
				setUserPlannedBannerData(data.user_planned_banner_data)
				setEventRewardsData(data.event_rewards_data)
				setChampionsMeetingData(data.champions_meeting_data)
			})
			.catch((error) => console.error("Error fetching calculator data:", error))
	}, [])

	useEffect(() => {
		const timer = setTimeout(() => {
			const userPlannedBannerDataCopy = userPlannedBannerData
				?.filter(
					(plannedBanner) =>
						plannedBanner.banner_uma || plannedBanner.banner_support
				)
				.map((plannedBanner) => {
					// eslint-disable-next-line @typescript-eslint/no-unused-vars
					const { tempId, ...rest } = plannedBanner

					return {
						...rest,
						banner_uma: plannedBanner.banner_uma?.id || null,
						banner_support: plannedBanner.banner_support?.id || null
					}
				})

			fetch("http://localhost:8000/calculator-data", {
				method: "PATCH",
				headers: {
					"Content-Type": "application/json",
					Authorization: `Token ${localStorage.getItem("authToken")}`
				},
				body: JSON.stringify({
					user_stats_data: userStatsData,
					user_planned_banner_data: userPlannedBannerDataCopy
				})
			})
		}, 5000)

		return () => clearTimeout(timer)
	}, [userStatsData, userPlannedBannerData])

	const value = {
		userStatsData,
		clubRankData,
		teamTrialsRankData,
		championsMeetingRankData,
		umaBannerData,
		supportBannerData,
		userPlannedBannerData,
		eventRewardsData,
		championsMeetingData,
		setUserPlannedBannerData,
		setUserStatsData
	}

	return (
		<CalculatorContext.Provider value={value}>
			{children}
		</CalculatorContext.Provider>
	)
}

// TODO: Add a loading state, error state, check if token is not null first before call, add token as dependency in useEffect, create functions that update backend shortly after user has not made changes for a while
</file>

<file path="src/components/carat-calculator/IncomeForm.tsx">
import Select from "react-select"
import { useCalculatorData } from "../../services/CalculatorContext"

export const IncomeForm = () => {
	const {
		userStatsData,
		clubRankData,
		teamTrialsRankData,
		championsMeetingRankData,
		setUserStatsData
	} = useCalculatorData()

	if (!userStatsData) {
		return <div>Loading...</div>
	}

	const teamTrialsRank = teamTrialsRankData?.find(
		(rank) => rank.id === userStatsData.team_trials_rank
	)
	const clubRank = clubRankData?.find(
		(rank) => rank.id === userStatsData.club_rank
	)
	const championsMeetingRank = championsMeetingRankData?.find(
		(rank) => rank.id === userStatsData.champions_meeting_rank
	)

	const customStyles = {
		option: (provided) => ({
			...provided,
			color: "#000"
		})
	}

	return (
		<div className="flex justify-center"><div className="bg-neutral-200 rounded-xl border border-gray-200 shadow-sm p-2 w-full lg:w-7/10 self-center">
			<div className="grid grid-cols-1 md:grid-cols-[1fr_2fr] items-center">
				<div className="grid grid-cols-1 content-evenly h-full">
					<div className="grid grid-cols-[30%_40%] lg:grid-cols-[40%_40%] items-center justify-center">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Current Carats:
						</div>
						<div>
							<input
								className="px-2 py-1 w-full border border-green-200 rounded-lg h-9.5 bg-emerald-50 focus:border-green-400 focus:outline-none shadow-sm text-base font-medium text-center"
								type="number"
								value={userStatsData.current_carat}
								min={0}
								onChange={(e) => {
									const newCaratCount = Number(e.target.value)
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.current_carat = newCaratCount
									setUserStatsData(userStatsDataCopy)
								}}
							/>
						</div>
					</div>
					<div className="grid grid-cols-[30%_40%] lg:grid-cols-[40%_40%] items-center justify-center">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Uma Tickets:
						</div>
						<div>
							<input
								className="px-2 py-1 w-full border border-green-200 rounded-lg h-9.5 bg-emerald-50 focus:border-green-400 focus:outline-none shadow-sm text-base font-medium text-center"
								type="number"
								value={userStatsData.uma_ticket}
								min={0}
								onChange={(e) => {
									const newUmaTicketCount = Number(e.target.value)
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.uma_ticket = newUmaTicketCount
									setUserStatsData(userStatsDataCopy)
								}}
							/>
						</div>
					</div>{" "}
					<div className="grid grid-cols-[30%_40%] lg:grid-cols-[40%_40%] items-center justify-center">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Support Tickets:
						</div>
						<div>
							<input
								className="px-2 py-1 w-full border border-green-200 rounded-lg h-9.5 bg-emerald-50 focus:border-green-400 focus:outline-none shadow-sm text-base font-medium text-center"
								type="number"
								value={userStatsData.support_ticket}
								min={0}
								onChange={(e) => {
									const newSupportTicketCount = Number(e.target.value)
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.support_ticket = newSupportTicketCount
									setUserStatsData(userStatsDataCopy)
								}}
							/>
						</div>
					</div>
				</div>
				<div className="grid grid-cols-1 content-evenly h-full">
					<div className="grid grid-cols-[1fr_2fr_1fr] md:grid-cols-[1fr_3fr_1fr] items-center justify-between">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Team Trials:
						</div>
						<div className="flex gap-2">
							<Select
								className="flex-1 text-center pr-1"
								styles={customStyles}
								defaultValue={
									teamTrialsRank
										? {
												value: teamTrialsRank,
												label: teamTrialsRank.name
										  }
										: null
								}
								placeholder="Select a rank"
								onChange={(selectedOption) => {
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.team_trials_rank = selectedOption.value.id
									setUserStatsData(userStatsDataCopy)
								}}
								options={teamTrialsRankData?.map((rank) => {
									return {
										value: rank,
										label: rank.name,
										key: rank.id
									}
								})}
							/>
						</div>
						<div className="border border-[#cccccc] rounded px-2 py-1 text-center text-base font-medium">
							{teamTrialsRank?.income_amount}
						</div>
					</div>
					<div className="grid grid-cols-[1fr_2fr_1fr] md:grid-cols-[1fr_3fr_1fr] items-center justify-between">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Club Rank:
						</div>
						<div className="flex gap-2">
							<Select
								className="flex-1 text-center pr-1"
								styles={customStyles}
								defaultValue={
									clubRank
										? {
												value: clubRank,
												label: clubRank.name
										  }
										: null
								}
								placeholder="Select a rank"
								onChange={(selectedOption) => {
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.club_rank = selectedOption.value.id
									setUserStatsData(userStatsDataCopy)
								}}
								options={clubRankData?.map((rank) => {
									return {
										value: rank,
										label: rank.name,
										key: rank.id
									}
								})}
							/>
						</div>{" "}
						<div className="border border-[#cccccc] px-2 py-1 text-center text-base font-medium">
							{clubRank?.income_amount}
						</div>
					</div>

					<div className="grid grid-cols-[1fr_2fr_1fr] md:grid-cols-[1fr_3fr_1fr] items-center justify-between">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Champion's Meeting:
						</div>
						<div className="flex gap-2">
							<Select
								className="flex-1 text-center pr-1"
								styles={customStyles}
								defaultValue={
									championsMeetingRank
										? {
												value: championsMeetingRank,
												label: championsMeetingRank.name
										  }
										: null
								}
								placeholder="Select a rank"
								onChange={(selectedOption) => {
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.champions_meeting_rank =
										selectedOption.value.id
									setUserStatsData(userStatsDataCopy)
								}}
								options={championsMeetingRankData?.map((rank) => {
									return {
										value: rank,
										label: rank.name,
										key: rank.id
									}
								})}
							/>
						</div>{" "}
						<div className="border border-[#cccccc] px-2 py-1 text-center text-base font-medium">
							{championsMeetingRank?.income_amount}
						</div>
					</div>

					<div className="grid grid-cols-[1fr_2fr_1fr] md:grid-cols-[1fr_3fr_1fr] items-center justify-between">
						<div className="text-right text-sm font-medium text-gray-700 pr-3">
							Daily Carat Pack:
						</div>
						<div className="flex gap-2">
							<Select
								className="flex-1 text-center pr-1"
								styles={customStyles}
								defaultValue={
									userStatsData
										? userStatsData.daily_carat
											? { value: { daily_carat: true }, label: "Yes" }
											: { value: { daily_carat: false }, label: "No" }
										: null
								}
								onChange={(selectedOption) => {
									const userStatsDataCopy = { ...userStatsData }
									userStatsDataCopy.daily_carat =
										selectedOption.value.daily_carat
									setUserStatsData(userStatsDataCopy)
								}}
								options={[
									{
										value: { daily_carat: true },
										label: "Yes"
									},
									{
										value: { daily_carat: false },
										label: "No"
									}
								]}
							/>
						</div>{" "}
						<div className="border border-[#cccccc] px-2 py-1 text-center text-base font-medium">
							{userStatsData.daily_carat === true ? 2000 : 0}
						</div>
					</div>
				</div>
			</div>
		</div></div>
	)
}
</file>

<file path="src/components/carat-calculator/BannerRow.tsx">
import {
	differenceInDays,
	eachDayOfInterval,
	eachMonthOfInterval,
	format,
	getDay
} from "date-fns"
import type {
	ChampionsMeetingRank,
	ClubRank,
	TeamTrailsRank,
	UserPlannedBanner,
	UserStats,
	BannerUma,
	BannerSupport
} from "../../services/calculatorTypes"
import { useEffect, useMemo, useState } from "react"
import Select from "react-select"
import { MLBChanceDisplay } from "./MLBChanceDisplay"

type BannerRowProps = {
	plannedBanner: UserPlannedBanner
	userStatsData: UserStats
	clubRankData: ClubRank[]
	teamTrialsRankData: TeamTrailsRank[]
	championsMeetingRankData: ChampionsMeetingRank[]
	userPlannedBannerData: UserPlannedBanner[] | []
	umaBannerData: BannerUma[]
	supportBannerData: BannerSupport[]
	caratsAvailableForThisBanner: number
	setUserPlannedBannerData: React.Dispatch<
		React.SetStateAction<UserPlannedBanner[] | []>
	>
	umaTicketsAvailableForThisBanner: number
	supportTicketsAvailableForThisBanner: number
}

export const BannerRow = ({
	plannedBanner,
	userStatsData,
	clubRankData,
	teamTrialsRankData,
	championsMeetingRankData,
	userPlannedBannerData,
	umaBannerData,
	supportBannerData,
	caratsAvailableForThisBanner,
	setUserPlannedBannerData,
	umaTicketsAvailableForThisBanner,
	supportTicketsAvailableForThisBanner

}: BannerRowProps) => {
	const [bannerType, setBannerType] = useState(
		plannedBanner.banner_support ? "Support" : "Uma"
	)
	const [targetBannerData, setTargetBannerData] = useState<
		BannerUma[] | BannerSupport[]
	>(plannedBanner.banner_support ? supportBannerData : umaBannerData)

	useEffect(() => {
		if (bannerType === "Uma") {
			// eslint-disable-next-line react-hooks/set-state-in-effect
			setTargetBannerData(umaBannerData)
		} else if (bannerType === "Support") {
			setTargetBannerData(supportBannerData)
		}
	}, [bannerType, supportBannerData, umaBannerData])

	const currentBanner = targetBannerData.find(
		(banner) =>
			banner.id === plannedBanner.banner_uma?.id ||
			banner.id === plannedBanner.banner_support?.id ||
			""
	)
	const userClubRank = clubRankData.find(
		(rank) => rank.id === userStatsData.club_rank
	)
	const userTeamTrialsRank = teamTrialsRankData.find(
		(rank) => rank.id === userStatsData.team_trials_rank
	)
	const userChampionsMeetingRank = championsMeetingRankData.find(
		(rank) => rank.id === userStatsData.champions_meeting_rank
	)
	const dailyCaratPack = userStatsData.daily_carat ? 50 : 0
	const currentDate = new Date()
	const endDate = new Date(
		plannedBanner.banner_uma
			? plannedBanner.banner_uma.banner_timeline.end_date
			: plannedBanner.banner_support
			? plannedBanner.banner_support.banner_timeline.end_date
			: currentDate
	)

	const calculateDaysBetween = (start: Date, end: Date): number => {
		return differenceInDays(end, start)
	}
	const calculateMondaysBetween = (start: Date, end: Date): number => {
		const allDays = eachDayOfInterval({ start, end })
		return allDays.filter((day) => getDay(day) === 1).length
	}
	const calculateMonthlyOccurrences = (start: Date, end: Date): number => {
		const months = eachMonthOfInterval({ start, end })
		return months.length
	}

	const numberOfDays = calculateDaysBetween(currentDate, endDate)
	const numberOfMondays = calculateMondaysBetween(currentDate, endDate)
	const numberOfMonthlyOccurrences = calculateMonthlyOccurrences(
		currentDate,
		endDate
	)

	const totalIncome = useMemo(() => {
		return (
			dailyCaratPack * numberOfDays +
			(userClubRank?.income_amount || 0) * numberOfMonthlyOccurrences +
			(userTeamTrialsRank?.income_amount || 0) * numberOfMondays +
			(userChampionsMeetingRank?.income_amount || 0) *
				numberOfMonthlyOccurrences
		)
	}, [
		dailyCaratPack,
		numberOfDays,
		userClubRank,
		userTeamTrialsRank,
		userChampionsMeetingRank,
		numberOfMondays,
		numberOfMonthlyOccurrences
	])

	const totalCarats = caratsAvailableForThisBanner + totalIncome 
	const calculateMaxPossiblePulls = () => {
	if (plannedBanner.banner_uma) {
		return (
			plannedBanner.banner_uma.free_pulls +
			umaTicketsAvailableForThisBanner +
			Math.floor(totalCarats / 150)
		)
	}

	if (plannedBanner.banner_support) {
		return (
			plannedBanner.banner_support.free_pulls +
			supportTicketsAvailableForThisBanner +
			Math.floor(totalCarats / 150)
		)
	}

	return 0
}

	const maxPossiblePulls = calculateMaxPossiblePulls()

	const handleDeleteBannerClick = () => {
		const confirmed = window.confirm("Are you sure you want to delete this banner?")

		if (!confirmed) {
			return 
		}

		const updatedUserPlannedBannerData = userPlannedBannerData?.filter(
			(mappedBannerData) =>
				mappedBannerData.tempId
					? mappedBannerData.tempId !== plannedBanner.tempId
					: mappedBannerData.id !== plannedBanner.id
		)
		setUserPlannedBannerData(updatedUserPlannedBannerData)
	}

	const customStyles = {
		option: (provided) => ({
			...provided,
			color: "#000"
		})
	}

	return (
		<div className="m-2 w-full flex flex-wrap lg:flex-nowrap">
			<div className="w-full flex flex-wrap bg-neutral-200 rounded-l-xl p-2 border border-gray-200 shadow-sm">
				<div className="w-full lg:w-1/3 flex flex-wrap border-0 rounded-2xl bg-white p-3 justify-center items-center">
					<div className="flex flex-col w-full text-center justify-evenly">
						<h1 className="text-sm font-medium text-gray-700">Banner Type:</h1>
						<Select
							styles={customStyles}
							defaultValue={{
								value: bannerType,
								label: bannerType
							}}
							onChange={(selectedOption) => {
								if (selectedOption) {
									setBannerType(selectedOption.value)
								}
							}}
							options={[
								{ value: "Uma", label: "Uma" },
								{ value: "Support", label: "Support" }
							]}
						/>
					</div>
					<div className="text-center w-full flex flex-wrap justify-evenly">
						<h1 className="text-sm w-full font-medium text-gray-700">
							Target Banner:
						</h1>
						<Select
							styles={customStyles}
							className="w-full"
							defaultValue={{
								value: currentBanner,
								label: currentBanner ? currentBanner.name : "Add a banner"
							}}
							onChange={(selectedOption) => {
								const updatedUserPlannedBannerData = userPlannedBannerData.map(
									(mappedBannerData) => {
										if (
											(mappedBannerData.id &&
												mappedBannerData.id === plannedBanner.id) ||
											(mappedBannerData.tempId &&
												mappedBannerData.tempId === plannedBanner.tempId)
										) {
											if (selectedOption && bannerType === "Uma") {
												return {
													...mappedBannerData,
													banner_uma: selectedOption.value,
													banner_support: undefined
												}
											} else if (selectedOption && bannerType === "Support") {
												return {
													...mappedBannerData,
													banner_uma: undefined,
													banner_support: selectedOption.value
												}
											}
										}
										return mappedBannerData
									}
								) as UserPlannedBanner[]
								const sorted = updatedUserPlannedBannerData.sort((a, b) => {
									const aDate = new Date(
										a.banner_uma
											? a.banner_uma.banner_timeline.start_date
											: a.banner_support!.banner_timeline.start_date
									)
									const bDate = new Date(
										b.banner_uma
											? b.banner_uma.banner_timeline.start_date
											: b.banner_support!.banner_timeline.start_date
									)
									return aDate.getTime() - bDate.getTime()
								})
								setUserPlannedBannerData(sorted)
							}}
							options={targetBannerData
								.filter((banner) =>
									bannerType === "Uma"
										? "umas" in banner
										: "support_cards" in banner
								)
								.map((banner) => ({
									value: banner,
									label: banner.name,
									key: banner.id
								}))}
						/>
					</div>{" "}
					<div className="flex w-full">
						<div className="w-1/3 text-center p-1">
							<div className="text-center w-full text-sm font-medium text-gray-700">
								Carat Estimation:
							</div>{" "}
							<div className="text-base font-medium">{totalCarats}</div>
						</div>
						<div className="w-1/3 text-center p-1">
							<div className="text-center w-full text-sm font-medium text-gray-700 ">
								Free Pulls:
							</div>{" "}
							<div className="text-base font-medium">{plannedBanner.banner_support ? plannedBanner.banner_support.free_pulls : plannedBanner.banner_uma.free_pulls}</div>
						</div>
						<div className="w-1/3 text-center p-1">
							<div className="text-center w-full text-sm font-medium text-gray-700">
								Max Pulls:
							</div>{" "}
							<div className="text-base font-medium">{maxPossiblePulls}</div>
						</div>
					</div>
					<div className="flex flex-col w-full text-center justify-evenly">
						<h1 className="text-sm font-medium text-gray-700 text-center">Pulls:</h1>
						<input
							type="number"
							value={plannedBanner.number_of_pulls}
							className="w-full text-center border border-green-200 rounded h-9.5 bg-emerald-50 focus:border-green-400 focus:outline-none pl-4"
							max={maxPossiblePulls}
							min={0}
							onChange={(e) => {
								const newPullCount = Number(e.target.value)

								const updatedUserPlannedBannerData = userPlannedBannerData?.map(
									(mappedBannerData) => {
										if (
											(mappedBannerData.id &&
												mappedBannerData.id === plannedBanner.id) ||
											(mappedBannerData.tempId &&
												mappedBannerData.tempId === plannedBanner.tempId)
										) {
											return {
												...mappedBannerData,
												number_of_pulls: newPullCount
											}
										}
										return mappedBannerData
									}
								)
								setUserPlannedBannerData(updatedUserPlannedBannerData)
							}}
						/>
					</div>
				</div>

				<div className="w-full lg:w-1/3 flex justify-center items-center">

					{(plannedBanner.banner_uma || plannedBanner.banner_support) && (
						<div className="flex flex-wrap border-0 rounded-2xl bg-white ml-4 p-3 justify-center items-center">
							<div className="flex w-full justify-center">
								<div className="flex flex-wrap p-1">
									<div className="text-center w-full text-sm font-medium text-gray-700">
										Start Date:
									</div>
									<div className="text-center w-full text-base font-medium">
										{plannedBanner.banner_uma || plannedBanner.banner_support
											? format(
													new Date(
														plannedBanner.banner_uma
															? plannedBanner.banner_uma.banner_timeline
																	.start_date
															: plannedBanner.banner_support.banner_timeline
																	.start_date
													),
													"MMMM d, yyyy"
											  )
											: ""}
									</div>
								</div>
								<div className="flex flex-wrap p-1">
									<div className="text-center w-full text-sm font-medium text-gray-700">
										End Date:{" "}
									</div>
									<div className="text-center w-full text-base font-medium">
										{plannedBanner.banner_uma || plannedBanner.banner_support
											? format(
													new Date(
														plannedBanner.banner_uma
															? plannedBanner.banner_uma.banner_timeline
																	.end_date
															: plannedBanner.banner_support.banner_timeline
																	.end_date
													),
													"MMMM d, yyyy"
											  )
											: ""}
									</div>
								</div>
							</div>
							<div className="flex flex-wrap">
								{plannedBanner.banner_uma
									? plannedBanner.banner_uma.umas.map((umas) => (
											<img key={umas.name} src={umas.image} alt={umas.name} className="h-auto w-auto max-h-40 object-contain flex-none"/>
									  ))
									: plannedBanner.banner_support
									? plannedBanner.banner_support.support_cards.map(
											(support_cards) => (
												<img
													key={support_cards.name}
													src={support_cards.image}
													alt={support_cards.name}
													className="h-auto w-auto max-h-40 object-contain flex-none"
												
												/>
											)
									  )
									: ""}
							</div>
						</div>
					)}
				</div>

				<div className="w-full lg:w-1/3 pl-1">
					{/*All the percentage chances of getting the MLBs*/}
					{(plannedBanner.banner_uma || plannedBanner.banner_support) && (
						<MLBChanceDisplay
							pulls={plannedBanner.number_of_pulls}
							plannedBanner={plannedBanner}
						/>
					)}
				</div>
			</div>
			<button
				onClick={handleDeleteBannerClick}
				className="w-full lg:w-auto pt-1 pb-1 lg:pl-1 lg:pr-1 rounded-b-xl lg:rounded-r-xl lg:rounded-l-none bg-red-50 border border-gray-300 text-red-900 font-medium hover:bg-red-200 transition text-xs"
			>
				Delete
			</button>
		</div>
	)
}
</file>

<file path="src/components/carat-calculator/CaratCalculator.tsx">
import type React from "react"
import { useCalculatorData } from "../../services/CalculatorContext"
import { BannerRow } from "./BannerRow"
import { IncomeForm } from "./IncomeForm"

export const CaratCalculator: React.FC = () => {
	const {
		userStatsData,
		clubRankData,
		teamTrialsRankData,
		championsMeetingRankData,
		championsMeetingData,
		eventRewardsData,
		umaBannerData,
		supportBannerData,
		userPlannedBannerData,
		setUserPlannedBannerData
	} = useCalculatorData()

	if (!userStatsData) {
		return <div>Loading...</div>
	}

	const handleAddBanner = () => {
		const arrayOfBannerIds = userPlannedBannerData.map(
			(banner) => (banner.tempId || banner.id)!
		)
		const highestId =
			arrayOfBannerIds.length > 0 ? Math.max(...arrayOfBannerIds) : 0

		const newPlannedBanner = {
			tempId: highestId + 1,
			number_of_pulls: 0
		}
		const plannedBannersArrayCopy = [...userPlannedBannerData]
		if (
			plannedBannersArrayCopy.every(
				(banner) => banner["banner_uma"] || banner["banner_support"]
			)
		) {
			plannedBannersArrayCopy.unshift(newPlannedBanner)
		}
		setUserPlannedBannerData(plannedBannersArrayCopy)
	}

	return (
		<div className="justify-center w-full min-h-screen bg-white lg:max-w-7xl mx-auto p-4">
			<IncomeForm />

			<div className="flex m-4 flex-wrap">
				{" "}
				<button
					className="w-full px-4 py-2 rounded-xl bg-gray-100 border border-gray-300 text-gray-800 font-medium hover:bg-gray-200 transition "
					onClick={handleAddBanner}
				>
					Add Additional Banner
				</button>
				{userPlannedBannerData.map((plannedBanner, index) => {
					// Calculate resources remaining after all previous banners
					let caratsRemaining = userStatsData.current_carat
					let umaTicketsRemaining = userStatsData.uma_ticket
					let supportTicketsRemaining = userStatsData.support_ticket
					let bannerEndDate = null
					const usedEventDates: number[] = []
					const usedMeetingDates: number[] = []

					const userChampionsMeetingRank = championsMeetingRankData.find(
						(rank) => rank.id === userStatsData.champions_meeting_rank
					)

					if (plannedBanner.banner_uma) {
						bannerEndDate = plannedBanner.banner_uma.banner_timeline.end_date
					} else {
						bannerEndDate =
							plannedBanner.banner_support.banner_timeline.end_date
					}

					for (const event of eventRewardsData) {
						const eventDate = new Date(event.date)
						const endDate = new Date(bannerEndDate)

						if (eventDate < endDate && !usedEventDates.includes(event.id)) {
							usedEventDates.push(event.id)
							caratsRemaining += event.carat_amount
							umaTicketsRemaining += event.uma_ticket_amount
							supportTicketsRemaining += event.support_ticket_amount
						}
					}

					for (const meeting of championsMeetingData) {
						const eventDate = new Date(meeting.end_date)
						const endDate = new Date(bannerEndDate)

						if (eventDate < endDate && !usedMeetingDates.includes(meeting.id)) {
							usedMeetingDates.push(meeting.id)
							caratsRemaining += userChampionsMeetingRank.income_amount
						}
					}

					// Process each previous banner to see what resources it consumed
					for (let i = 0; i < index; i++) {
						const prevBanner = userPlannedBannerData[i]

						let pullsToAllocate = prevBanner.number_of_pulls

						// Determine banner type and free pulls
						const isUmaBanner = !!prevBanner.banner_uma
						const freePulls =
							prevBanner.banner_uma?.free_pulls ||
							prevBanner.banner_support?.free_pulls ||
							0

						// Step 1: Subtract free pulls first (they're free!)
						pullsToAllocate -= freePulls

						// Step 2: Use tickets next (uma or support depending on banner type)
						if (isUmaBanner) {
							const ticketsToUse = Math.min(
								pullsToAllocate,
								umaTicketsRemaining
							)
							umaTicketsRemaining -= ticketsToUse
							pullsToAllocate -= ticketsToUse
						} else {
							const ticketsToUse = Math.min(
								pullsToAllocate,
								supportTicketsRemaining
							)
							supportTicketsRemaining -= ticketsToUse
							pullsToAllocate -= ticketsToUse
						}

						// Step 3: Remaining pulls come from carats
						const caratCost = pullsToAllocate * 150
						caratsRemaining -= caratCost
					}

					return (
						<BannerRow
							key={plannedBanner.id || plannedBanner.tempId}
							plannedBanner={plannedBanner}
							userPlannedBannerData={userPlannedBannerData || []}
							clubRankData={clubRankData || []}
							teamTrialsRankData={teamTrialsRankData || []}
							championsMeetingRankData={championsMeetingRankData || []}
							userStatsData={userStatsData}
							umaBannerData={umaBannerData || []}
							supportBannerData={supportBannerData || []}
							setUserPlannedBannerData={setUserPlannedBannerData}
							caratsAvailableForThisBanner={caratsRemaining}
							umaTicketsAvailableForThisBanner={umaTicketsRemaining}
							supportTicketsAvailableForThisBanner={supportTicketsRemaining}
						/>
					)
				})}
			</div>
		</div>
	)
}
</file>

</files>
